{"version":3,"sources":["webpack:///src/components/pages/frontend/CustomerOrder.vue","webpack:///./src/components/pages/frontend/CustomerOrder.vue?045f","webpack:///./src/components/pages/frontend/CustomerOrder.vue"],"names":["CustomerOrder","data","form","user","name","email","tel","address","message","isLeave","created","this","getCart","computed","extends_default","Object","vuex_esm","methods","creatOrder","_this","vm","order","$refs","validate","then","success","$store","dispatch","status","root","beforeRouteLeave","to","from","next","$","modal","on","frontend_CustomerOrder","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","_l","cart","item","key","id","style","backgroundImage","product","staticStyle","width","_s","title","coupon","_e","_f","total","final_total","attrs","colspan","ref","submit","$event","preventDefault","rules","scopedSlots","_u","fn","errors","classes","for","directives","rawName","value","expression","class","type","placeholder","domProps","input","target","composing","$set","cols","rows","staticRenderFns","src","__webpack_require__","role","border-top","tabindex","aria-labelledby","aria-hidden","data-backdrop","data-dismiss","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.8c6444acba50aba0376e.js","sourcesContent":["<template>\n  <div>\n    <div class=\"container p-3 p-md-4\">\n      <div class=\"jam-icon text-center\">\n        <img src=\"@/assets/images/jam.png\">\n      </div>\n      <h2 class=\"jam-title\">建立訂單</h2>\n      <div class=\"row mb-5\">\n        <div class=\"col-sm-4\">\n          <div class=\"alert alert-success rounded-pill text-center\" role=\"alert\">1.填寫訂單</div>\n        </div>\n        <div class=\"col-sm-4\">\n          <div class=\"alert alert-light rounded-pill text-center\" role=\"alert\">2.確認付款</div>\n        </div>\n        <div class=\"col-sm-4\">\n          <div class=\"alert alert-light rounded-pill text-center\" role=\"alert\">3.訂單完成</div>\n        </div>\n      </div>\n      <div class=\"my-4 row\">\n        <table class=\"table border mx-auto col-10 col-md-8\">\n          <thead class=\"bg-gray-100\" style=\"border-top: 5px solid #87A861\">\n            <tr>\n              <th colspan=\"3\">訂單明細</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n              <td class=\"d-sm-block d-none text-center\">\n                <div\n                  class=\"cart-image d-inline-block\"\n                  :style=\"{ 'backgroundImage':`url('${item.product.imageUrl}')` }\"\n                ></div>\n              </td>\n              <td class=\"align-middle\" style=\"width:auto;\">\n                <span>{{ item.product.title }}</span>\n                <br>\n                <span class=\"text-gray-600\">x {{`${item.qty} ${item.product.unit}`}}</span>\n                <br>\n                <small class=\"text-success\" v-if=\"item.coupon\">優惠券-{{ item.coupon.title }}</small>\n              </td>\n              <td class=\"align-middle text-right border-right\">{{ item.total | currency }}元</td>\n            </tr>\n          </tbody>\n          <tfoot>\n            <tr>\n              <!-- <td colspan=\"3\" class=\"text-right border-top\" style=\"border:none\">\n                運費:\n                <span class=\"ml-4 mr-1\">$0</span>\n              </td> -->\n              <td colspan=\"3\" class=\"text-right text-success\"\n                v-if=\"(cart.total - cart.final_total) > 0\"\n                >\n                折扣金額:\n                <span class=\"ml-4 mr-1\">{{ cart.total - cart.final_total | currency }}元</span>\n              </td>\n            </tr>\n            <tr>\n              <td colspan=\"3\" class=\"bg-secondary text-right text-light font-weight-bold\">\n                總計:\n                <span class=\"h2\">{{ cart.final_total | currency }}元</span>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n      <!-- 訂單資料 -->\n      <ValidationObserver ref=\"form\" class=\"my-5 row justify-content-center\">\n        <form class=\"mx-auto col-12 col-md-8\" @submit.prevent=\"creatOrder\">\n          <h5 class=\"mb-5 text-center\">填寫訂單資料</h5>\n          <div class=\"form-row\">\n            <div class=\"form-group col-md-6\">\n              <validation-provider rules=\"required\" v-slot=\"{errors, classes}\">\n                <label for=\"username\">收件人姓名*</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  name=\"姓名\"\n                  id=\"username\"\n                  placeholder=\"輸入姓名\"\n                  v-model=\"form.user.name\"\n                  :class=\"classes\"\n                >\n                <span class=\"text-danger\">{{errors[0]}}</span>\n              </validation-provider>\n            </div>\n            <div class=\"form-group col-md-6\">\n              <validation-provider rules=\"required\" v-slot=\"{errors, classes}\">\n                <label for=\"usertel\">收件人電話*</label>\n                <input\n                  type=\"tel\"\n                  class=\"form-control\"\n                  name=\"收件人電話\"\n                  id=\"usertel\"\n                  placeholder=\"請輸入電話\"\n                  v-model=\"form.user.tel\"\n                  :class=\"classes\"\n                >\n                <span class=\"text-danger\">{{errors[0]}}</span>\n              </validation-provider>\n            </div>\n          </div>\n\n          <div class=\"form-group\">\n            <validation-provider rules=\"required|email\" v-slot=\"{errors, classes}\">\n              <label for=\"useremail\">Email*</label>\n              <input\n                type=\"email\"\n                class=\"form-control\"\n                name=\"Email\"\n                id=\"useremail\"\n                placeholder=\"請輸入 Email\"\n                v-model=\"form.user.email\"\n                :class=\"classes\"\n              >\n              <span class=\"text-danger\">{{errors[0]}}</span>\n            </validation-provider>\n          </div>\n\n          <div class=\"form-group\">\n            <validation-provider rules=\"required\" v-slot=\"{errors, classes}\">\n              <label for=\"useraddress\">收件人地址*</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                name=\"收件人地址\"\n                id=\"useraddress\"\n                placeholder=\"請輸入地址\"\n                v-model=\"form.user.address\"\n                :class=\"classes\"\n              >\n              <span class=\"text-danger\">{{errors[0]}}</span>\n            </validation-provider>\n          </div>\n\n          <div class=\"form-group\">\n            <label for=\"comment\">備註</label>\n            <textarea\n              name\n              id=\"comment\"\n              class=\"form-control\"\n              cols=\"30\"\n              rows=\"10\"\n              v-model=\"form.message\"\n            ></textarea>\n          </div>\n          <div class=\"text-right\">\n            <button class=\"btn btn-light-red\">確認送出訂單</button>\n          </div>\n        </form>\n      </ValidationObserver>\n    </div>\n\n    <!-- Modal -->\n    <div class=\"modal fade\" id=\"CreateOrder\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"CreateOrderCenterTitle\" aria-hidden=\"true\"  data-backdrop=\"static\">\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body leave-modal\">\n            <p>您的訂單尚未成立，確定要離開此頁?</p>\n            <div class=\"text-right\">\n              <button type=\"button\" class=\"btn btn-outline-secondary mr-2 confirm\" data-dismiss=\"modal\">確定</button>\n              <button type=\"button\" class=\"btn btn-danger cancel\" data-dismiss=\"modal\">取消</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {mapGetters, mapActions} from 'vuex';\n\nexport default {\n  data() {\n    return {\n      form: {\n        user: {\n          name: \"\",\n          email: \"\",\n          tel: \"\",\n          address: \"\"\n        },\n        message: \"\",\n        isLeave: false,\n      },\n    };\n  },\n  created() {\n    this.getCart();\n  },\n  computed: {\n    ...mapGetters('cartModules', ['cart']),\n  },\n  methods: {\n    ...mapActions('cartModules', ['getCart']),\n    creatOrder() {\n      const vm = this;\n      const order = vm.form;\n      this.$refs.form.validate().then(success => {\n        if (success) {\n          vm.$store.dispatch('orderModules/creatOrder', order);\n          this.isLeave = true;\n        } else {\n          vm.$store.dispatch('alertModules/updateMessage', { message: '欄位填寫不完整', status: 'danger' }, { root: true });\n        }\n      });\n    }\n  },\n  beforeRouteLeave (to, from, next) {\n    const vm = this;\n    if(vm.isLeave) {\n      next();\n    } else {\n      $('#CreateOrder').modal('show');\n\n      $('.confirm').on('click', () => {\n        next();\n      });\n      $('.cancel').on('click', () => {\n        next(false);\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.alert-light {\n  background: #f7f7f7;\n  border-color: #f2f2f2;\n  color: #919191;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/pages/frontend/CustomerOrder.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container p-3 p-md-4\"},[_vm._m(0),_vm._v(\" \"),_c('h2',{staticClass:\"jam-title\"},[_vm._v(\"建立訂單\")]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"my-4 row\"},[_c('table',{staticClass:\"table border mx-auto col-10 col-md-8\"},[_vm._m(2),_vm._v(\" \"),_c('tbody',_vm._l((_vm.cart.carts),function(item){return _c('tr',{key:item.id},[_c('td',{staticClass:\"d-sm-block d-none text-center\"},[_c('div',{staticClass:\"cart-image d-inline-block\",style:({ 'backgroundImage':(\"url('\" + (item.product.imageUrl) + \"')\") })})]),_vm._v(\" \"),_c('td',{staticClass:\"align-middle\",staticStyle:{\"width\":\"auto\"}},[_c('span',[_vm._v(_vm._s(item.product.title))]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('span',{staticClass:\"text-gray-600\"},[_vm._v(\"x \"+_vm._s(((item.qty) + \" \" + (item.product.unit))))]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),(item.coupon)?_c('small',{staticClass:\"text-success\"},[_vm._v(\"優惠券-\"+_vm._s(item.coupon.title))]):_vm._e()]),_vm._v(\" \"),_c('td',{staticClass:\"align-middle text-right border-right\"},[_vm._v(_vm._s(_vm._f(\"currency\")(item.total))+\"元\")])])}),0),_vm._v(\" \"),_c('tfoot',[_c('tr',[((_vm.cart.total - _vm.cart.final_total) > 0)?_c('td',{staticClass:\"text-right text-success\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"\\n              折扣金額:\\n              \"),_c('span',{staticClass:\"ml-4 mr-1\"},[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.total - _vm.cart.final_total))+\"元\")])]):_vm._e()]),_vm._v(\" \"),_c('tr',[_c('td',{staticClass:\"bg-secondary text-right text-light font-weight-bold\",attrs:{\"colspan\":\"3\"}},[_vm._v(\"\\n              總計:\\n              \"),_c('span',{staticClass:\"h2\"},[_vm._v(_vm._s(_vm._f(\"currency\")(_vm.cart.final_total))+\"元\")])])])])])]),_vm._v(\" \"),_c('ValidationObserver',{ref:\"form\",staticClass:\"my-5 row justify-content-center\"},[_c('form',{staticClass:\"mx-auto col-12 col-md-8\",on:{\"submit\":function($event){$event.preventDefault();return _vm.creatOrder($event)}}},[_c('h5',{staticClass:\"mb-5 text-center\"},[_vm._v(\"填寫訂單資料\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-row\"},[_c('div',{staticClass:\"form-group col-md-6\"},[_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{attrs:{\"for\":\"username\"}},[_vm._v(\"收件人姓名*\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.name),expression:\"form.user.name\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"name\":\"姓名\",\"id\":\"username\",\"placeholder\":\"輸入姓名\"},domProps:{\"value\":(_vm.form.user.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"name\", $event.target.value)}}}),_vm._v(\" \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"form-group col-md-6\"},[_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{attrs:{\"for\":\"usertel\"}},[_vm._v(\"收件人電話*\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.tel),expression:\"form.user.tel\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"tel\",\"name\":\"收件人電話\",\"id\":\"usertel\",\"placeholder\":\"請輸入電話\"},domProps:{\"value\":(_vm.form.user.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"tel\", $event.target.value)}}}),_vm._v(\" \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}])})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('validation-provider',{attrs:{\"rules\":\"required|email\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{attrs:{\"for\":\"useremail\"}},[_vm._v(\"Email*\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.email),expression:\"form.user.email\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"email\",\"name\":\"Email\",\"id\":\"useremail\",\"placeholder\":\"請輸入 Email\"},domProps:{\"value\":(_vm.form.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"email\", $event.target.value)}}}),_vm._v(\" \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('validation-provider',{attrs:{\"rules\":\"required\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar classes = ref.classes;\nreturn [_c('label',{attrs:{\"for\":\"useraddress\"}},[_vm._v(\"收件人地址*\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.user.address),expression:\"form.user.address\"}],staticClass:\"form-control\",class:classes,attrs:{\"type\":\"text\",\"name\":\"收件人地址\",\"id\":\"useraddress\",\"placeholder\":\"請輸入地址\"},domProps:{\"value\":(_vm.form.user.address)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form.user, \"address\", $event.target.value)}}}),_vm._v(\" \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(errors[0]))])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"comment\"}},[_vm._v(\"備註\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.message),expression:\"form.message\"}],staticClass:\"form-control\",attrs:{\"name\":\"\",\"id\":\"comment\",\"cols\":\"30\",\"rows\":\"10\"},domProps:{\"value\":(_vm.form.message)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"message\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"btn btn-light-red\"},[_vm._v(\"確認送出訂單\")])])])])],1),_vm._v(\" \"),_vm._m(3)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"jam-icon text-center\"},[_c('img',{attrs:{\"src\":require(\"@/assets/images/jam.png\")}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row mb-5\"},[_c('div',{staticClass:\"col-sm-4\"},[_c('div',{staticClass:\"alert alert-success rounded-pill text-center\",attrs:{\"role\":\"alert\"}},[_vm._v(\"1.填寫訂單\")])]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-4\"},[_c('div',{staticClass:\"alert alert-light rounded-pill text-center\",attrs:{\"role\":\"alert\"}},[_vm._v(\"2.確認付款\")])]),_vm._v(\" \"),_c('div',{staticClass:\"col-sm-4\"},[_c('div',{staticClass:\"alert alert-light rounded-pill text-center\",attrs:{\"role\":\"alert\"}},[_vm._v(\"3.訂單完成\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',{staticClass:\"bg-gray-100\",staticStyle:{\"border-top\":\"5px solid #87A861\"}},[_c('tr',[_c('th',{attrs:{\"colspan\":\"3\"}},[_vm._v(\"訂單明細\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"CreateOrder\",\"tabindex\":\"-1\",\"role\":\"dialog\",\"aria-labelledby\":\"CreateOrderCenterTitle\",\"aria-hidden\":\"true\",\"data-backdrop\":\"static\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\",attrs:{\"role\":\"document\"}},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-body leave-modal\"},[_c('p',[_vm._v(\"您的訂單尚未成立，確定要離開此頁?\")]),_vm._v(\" \"),_c('div',{staticClass:\"text-right\"},[_c('button',{staticClass:\"btn btn-outline-secondary mr-2 confirm\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"確定\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-danger cancel\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"取消\")])])])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-76b97424\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/pages/frontend/CustomerOrder.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-76b97424\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CustomerOrder.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CustomerOrder.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CustomerOrder.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-76b97424\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CustomerOrder.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/pages/frontend/CustomerOrder.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}